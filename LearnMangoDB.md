# MangoDB学习过程

****************************

## 一、各种命令

* 帮助 ```help```

* 查看所有数据库 ```show databases```

* 切换数据库 ```use [数据库名]```

* 创建数据库 ```use [新数据库名]``` ***在插入数据前，新数据库不会显示在数据库列表中***

* 清屏 ```cls```

* 创建集合并插入一条数据 ```db.[集合名].insertOne({[字段名]: "要插入的数据"})```

* 查看集合中的数据 ```db.[集合名].find()``` ***在find()后面加上.limit()可以限制返回的数据，limit()括号中的数字表示限制返回的条数***

* 插入多条数据 ```db.[集合名].insertMany([{字段名: 数据}, {字段名: 数据}])```

* 对数据进行排序 ```db.[集合名].find().sort({字段名:1})``` ***1表示按照升序排序，-1表示按照降序排序***

* 按照多个字段排序 ```db.[集合名].find().sort({字段名: 1, 字段名: -1})```

* 跳过前n名的查询结果 ```db.[集合名].find().sort({字段名: 1}).skip(1)``` ***skip()括号中表示要跳过的条数***

* 查询满足一定条件的数据 ```db.[集合名].find({字段名: 3})``` ***表示查询符合字段名为3的数据***

* 查询满足一定条件的数据，只返回指定的字段 ```db.[集合名].find({字段名: 3}, {字段名: 1, 字段名: 1, 字段名: 0})``` ***后面的花括号中的字段为指定的字段，1表示要显示，0表示不显示***

* 查询某个字段大于多少的结果 ```db.[集合名].find({字段名: {$gt: 3}})``` ***$lt表示小于, $eq表示等于***

* 查询某个字段在一定范围内的结果 ```db.[集合名].find({字段名: {$in: [1,3]}})``` ***表示查询指定字段结果为1和3的数据，注意并非1至3，而是1和3***

* 查询某个字段不在一定范围内的结果 ```db.[集合名].find({字段名: {$nin: [1,3]}})```

* 查询某个字段存在的数据 ```db.[集合名].find({字段名: {$exists: true}})``` ***如果将true换为false，则为查询某个字段不存在的数据***

* 查询某些字段在一定范围内的结果 ```db.[集合名].find({字段名: {$gte: 3, $lte: 5}})``` ***表示查询该字段大于3小于5的数据***

* 功能同上 ```db.[集合名].find({$and: [{字段名: {$gte: 3}}, {字段名: {$lte: 5}}]})```

* 查询某些字段符合其中一个条件的结果 ```db.[集合名].find({$or: [{字段名: {$gte: 3}}, {字段名: {$lte: 5}}]})```

* 查询某个字段不符合某个条件的结果 ```db.[集合名].find({字段名: {$not: {$eq: 3}}})```

* 查询某个字段符合正则表达式的结果 ```db.[集合名].find({name: {$regex: /正则表达式/}})``` ***正则表达式后面的逗号之后，可以加上$options: 'i'表示忽略大小写***

* 统计数据的数量 ```db.[集合名].countDocuments()```

* 统计满足某个条件的数据的数量 ```db.[集合名].countDocuments({字段名: {$gte: 3}})```

* 查询满足条件的一条数据 ```db.[集合名].findOne({字段名: {$gte: 3}})```

* 更新满足条件的一条数据 ```db.[集合名].updateOne({字段名: 1}, {$set: {要更新的字段名: 100}})``` ***100表示更新后的数据，要更新的字段如果不存在，则会自动创建***

* 更新满足条件的多条数据 ```db.[集合名].updateMany({字段名: 1}, {$set: {要更新的字段: 100}})```

* 删除数据 ```db.[集合名].deleteOne({字段名: 1})```

* 删除多条数据 ```db.[集合名].deleteMany({字段名: 1})```

